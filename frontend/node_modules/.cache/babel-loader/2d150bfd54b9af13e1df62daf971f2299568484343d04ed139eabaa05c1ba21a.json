{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fkuce\\\\OneDrive\\\\Desktop\\\\Money Projects\\\\Visualizer\\\\frontend\\\\src\\\\components\\\\VideoExporter.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport './VideoExporter.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoExporter = ({\n  visualizerRef,\n  audioFile,\n  isPlaying\n}) => {\n  _s();\n  const [isRecording, setIsRecording] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const chunksRef = useRef([]);\n  const startRecording = async () => {\n    if (!visualizerRef || !audioFile) return;\n    const stream = visualizerRef.captureStream(30);\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n    const audioSource = audioContext.createMediaElementSource(new Audio(audioFile.path));\n    const audioDestination = audioContext.createMediaStreamDestination();\n    audioSource.connect(audioDestination);\n    const combinedStream = new MediaStream([...stream.getVideoTracks(), ...audioDestination.stream.getAudioTracks()]);\n    const mediaRecorder = new MediaRecorder(combinedStream, {\n      mimeType: 'video/webm;codecs=vp9,opus'\n    });\n    mediaRecorderRef.current = mediaRecorder;\n    chunksRef.current = [];\n    mediaRecorder.ondataavailable = event => {\n      if (event.data.size > 0) {\n        chunksRef.current.push(event.data);\n      }\n    };\n    mediaRecorder.onstop = () => {\n      const blob = new Blob(chunksRef.current, {\n        type: 'video/webm'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'visualization.webm';\n      a.click();\n      URL.revokeObjectURL(url);\n      setIsRecording(false);\n    };\n    mediaRecorder.start();\n    setIsRecording(true);\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-exporter\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `record-button ${isRecording ? 'recording' : ''}`,\n      onClick: isRecording ? stopRecording : startRecording,\n      disabled: !visualizerRef || !audioFile || isPlaying,\n      children: isRecording ? 'Stop Recording' : 'Record Video'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoExporter, \"Zbm04aL+BK1BiDYTDsIbecs//EI=\");\n_c = VideoExporter;\nexport default VideoExporter;\nvar _c;\n$RefreshReg$(_c, \"VideoExporter\");","map":{"version":3,"names":["React","useRef","useState","jsxDEV","_jsxDEV","VideoExporter","visualizerRef","audioFile","isPlaying","_s","isRecording","setIsRecording","mediaRecorderRef","chunksRef","startRecording","stream","captureStream","audioContext","window","AudioContext","webkitAudioContext","audioSource","createMediaElementSource","Audio","path","audioDestination","createMediaStreamDestination","connect","combinedStream","MediaStream","getVideoTracks","getAudioTracks","mediaRecorder","MediaRecorder","mimeType","current","ondataavailable","event","data","size","push","onstop","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","start","stopRecording","stop","className","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/fkuce/OneDrive/Desktop/Money Projects/Visualizer/frontend/src/components/VideoExporter.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport './VideoExporter.css';\r\n\r\nconst VideoExporter = ({ visualizerRef, audioFile, isPlaying }) => {\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const mediaRecorderRef = useRef(null);\r\n  const chunksRef = useRef([]);\r\n\r\n  const startRecording = async () => {\r\n    if (!visualizerRef || !audioFile) return;\r\n\r\n    const stream = visualizerRef.captureStream(30);\r\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n    const audioSource = audioContext.createMediaElementSource(new Audio(audioFile.path));\r\n    const audioDestination = audioContext.createMediaStreamDestination();\r\n    audioSource.connect(audioDestination);\r\n\r\n    const combinedStream = new MediaStream([\r\n      ...stream.getVideoTracks(),\r\n      ...audioDestination.stream.getAudioTracks()\r\n    ]);\r\n\r\n    const mediaRecorder = new MediaRecorder(combinedStream, {\r\n      mimeType: 'video/webm;codecs=vp9,opus'\r\n    });\r\n\r\n    mediaRecorderRef.current = mediaRecorder;\r\n    chunksRef.current = [];\r\n\r\n    mediaRecorder.ondataavailable = (event) => {\r\n      if (event.data.size > 0) {\r\n        chunksRef.current.push(event.data);\r\n      }\r\n    };\r\n\r\n    mediaRecorder.onstop = () => {\r\n      const blob = new Blob(chunksRef.current, { type: 'video/webm' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'visualization.webm';\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n      setIsRecording(false);\r\n    };\r\n\r\n    mediaRecorder.start();\r\n    setIsRecording(true);\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && isRecording) {\r\n      mediaRecorderRef.current.stop();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"video-exporter\">\r\n      <button\r\n        className={`record-button ${isRecording ? 'recording' : ''}`}\r\n        onClick={isRecording ? stopRecording : startRecording}\r\n        disabled={!visualizerRef || !audioFile || isPlaying}\r\n      >\r\n        {isRecording ? 'Stop Recording' : 'Record Video'}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoExporter; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC/C,OAAO,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7B,MAAMC,aAAa,GAAGA,CAAC;EAAEC,aAAa;EAAEC,SAAS;EAAEC;AAAU,CAAC,KAAK;EAAAC,EAAA;EACjE,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAMU,gBAAgB,GAAGX,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMY,SAAS,GAAGZ,MAAM,CAAC,EAAE,CAAC;EAE5B,MAAMa,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACR,aAAa,IAAI,CAACC,SAAS,EAAE;IAElC,MAAMQ,MAAM,GAAGT,aAAa,CAACU,aAAa,CAAC,EAAE,CAAC;IAC9C,MAAMC,YAAY,GAAG,KAAKC,MAAM,CAACC,YAAY,IAAID,MAAM,CAACE,kBAAkB,EAAE,CAAC;IAC7E,MAAMC,WAAW,GAAGJ,YAAY,CAACK,wBAAwB,CAAC,IAAIC,KAAK,CAAChB,SAAS,CAACiB,IAAI,CAAC,CAAC;IACpF,MAAMC,gBAAgB,GAAGR,YAAY,CAACS,4BAA4B,CAAC,CAAC;IACpEL,WAAW,CAACM,OAAO,CAACF,gBAAgB,CAAC;IAErC,MAAMG,cAAc,GAAG,IAAIC,WAAW,CAAC,CACrC,GAAGd,MAAM,CAACe,cAAc,CAAC,CAAC,EAC1B,GAAGL,gBAAgB,CAACV,MAAM,CAACgB,cAAc,CAAC,CAAC,CAC5C,CAAC;IAEF,MAAMC,aAAa,GAAG,IAAIC,aAAa,CAACL,cAAc,EAAE;MACtDM,QAAQ,EAAE;IACZ,CAAC,CAAC;IAEFtB,gBAAgB,CAACuB,OAAO,GAAGH,aAAa;IACxCnB,SAAS,CAACsB,OAAO,GAAG,EAAE;IAEtBH,aAAa,CAACI,eAAe,GAAIC,KAAK,IAAK;MACzC,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE;QACvB1B,SAAS,CAACsB,OAAO,CAACK,IAAI,CAACH,KAAK,CAACC,IAAI,CAAC;MACpC;IACF,CAAC;IAEDN,aAAa,CAACS,MAAM,GAAG,MAAM;MAC3B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC9B,SAAS,CAACsB,OAAO,EAAE;QAAES,IAAI,EAAE;MAAa,CAAC,CAAC;MAChE,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;MACrC,MAAMM,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;MACrCF,CAAC,CAACG,IAAI,GAAGN,GAAG;MACZG,CAAC,CAACI,QAAQ,GAAG,oBAAoB;MACjCJ,CAAC,CAACK,KAAK,CAAC,CAAC;MACTP,GAAG,CAACQ,eAAe,CAACT,GAAG,CAAC;MACxBlC,cAAc,CAAC,KAAK,CAAC;IACvB,CAAC;IAEDqB,aAAa,CAACuB,KAAK,CAAC,CAAC;IACrB5C,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAM6C,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI5C,gBAAgB,CAACuB,OAAO,IAAIzB,WAAW,EAAE;MAC3CE,gBAAgB,CAACuB,OAAO,CAACsB,IAAI,CAAC,CAAC;IACjC;EACF,CAAC;EAED,oBACErD,OAAA;IAAKsD,SAAS,EAAC,gBAAgB;IAAAC,QAAA,eAC7BvD,OAAA;MACEsD,SAAS,EAAE,iBAAiBhD,WAAW,GAAG,WAAW,GAAG,EAAE,EAAG;MAC7DkD,OAAO,EAAElD,WAAW,GAAG8C,aAAa,GAAG1C,cAAe;MACtD+C,QAAQ,EAAE,CAACvD,aAAa,IAAI,CAACC,SAAS,IAAIC,SAAU;MAAAmD,QAAA,EAEnDjD,WAAW,GAAG,gBAAgB,GAAG;IAAc;MAAAoD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1C;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAACxD,EAAA,CAhEIJ,aAAa;AAAA6D,EAAA,GAAb7D,aAAa;AAkEnB,eAAeA,aAAa;AAAC,IAAA6D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}